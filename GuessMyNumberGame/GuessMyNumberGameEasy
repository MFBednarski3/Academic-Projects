/**
 * The Main playing game itself
 */

import java.awt.Color;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import java.util.Random;

import javax.swing.*;

public class GuessMyNumberGameEasy {
	
	//We declare these variables static as we want to be able to change these values. Without static would make these always 0
	static int tries = 0; 
	static int lastGuess = 0;
	
	//This is how we get the random number
	Random rand = new Random();
	int answer = rand.nextInt(10)+1;
	
	//Components to add to a new frame
	JLabel label1 = new JLabel();
	JLabel label2 = new JLabel();
	JButton button1 = new JButton("Submit");
	JButton button2 = new JButton("Reset");
	JTextField text1 = new JTextField();
	JFrame frame = new JFrame("Guess My Number Game");
	
	public GuessMyNumberGameEasy(){
		//Some stuff are the same as the menu
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.setSize(400,300);
		frame.setLayout(new GridLayout(4,1));
		frame.getContentPane().setBackground(Color.GREEN);
		
		label1.setText("Guess a number between 1 and 10");
		label1.setHorizontalTextPosition(JLabel.CENTER);
		label1.setHorizontalAlignment(JLabel.CENTER);
		
		label2.setText("Enter your guess in the text box below");
		label2.setHorizontalTextPosition(JLabel.CENTER);
		label2.setHorizontalAlignment(JLabel.CENTER);
		
		frame.add(label1);
		frame.add(label2);
		frame.add(text1);
		frame.add(button1);
		frame.setVisible(true);
		
		//This is the submit button action
		button1.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e) {
				String guessString = text1.getText(); //Text boxes only take string values in, because of this...
				int guess = Integer.parseInt(guessString); //We convert this to an int. You cannot compare an int with a string
				if (guess == answer){ //If the answer is correct
					try { //We use a try/catch method in case things go wrong
						ExactGuess();
					} catch (ClassNotFoundException | IOException | InterruptedException e1) { //Probably won't happen but a catch method just in case
						e1.printStackTrace();
					}
				}
				else if (guess < 1 || guess > 10){ //If the number is out of bounds
					tries++; //We count it as a try
					JOptionPane.showMessageDialog(new JFrame(), "Number is not between 1 and 10", "ERROR", JOptionPane.ERROR_MESSAGE); //We use a new
					//frame to show that there is an error.
					label1.setText("Guess a number BETWEEN 1 and 10"); //We change the text to remind that the number has to be between 1 and 10
					label2.setText("Enter your guess in the text box below");
				}
				else{ //or else if (guess !=answer && guess >= 1 && guess <= 10)
					if (guess < answer){ //Low number scenario
						LowGuess(guess);
					}
					else{ //High Number Scenario
						HighGuess(guess);
					}
				}
			}	
		});
		
		
	}
	void LowGuess(int guess){ //In case of a guess that is low, we increase the tries and let the user know
		lastGuess = guess;
		tries++;
		label1.setText("That number is too low. Try higher");
		label2.setText("Last number guessed: " + lastGuess);
		
	}
	
	void HighGuess(int guess){ //Same as low guess but for high guess
		lastGuess = guess;
		tries++;
		label1.setText("That number is too high. Try lower");
		label2.setText("Last number guessed: " + lastGuess);
	}
	
	void ExactGuess() throws ClassNotFoundException, IOException, InterruptedException{ //If the guess is exact
		tries++;
		label1.setText("That is the exact number!");
		label2.setText("You toke " + tries + " tries");
		button1.setEnabled(false); //We disable the button to prevent any more guesses
		
		HighScoresEasy scores = new HighScoresEasy(); //We create an object for scores
		
		int finalScore = 11 - tries; //The final score is based on the amount of tries. Higher score == less tries
		scores.addScore(finalScore); //We add the score to the file
		scores.HighScoreBox(); //We show the box
		frame.dispose(); //We get rid of the game frame
	}
}
